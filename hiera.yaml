---
version: 5
defaults:
  datadir: data
  data_hash: yaml_data

hierarchy:
  - name: "Hiera-vault lookup"
    lookup_key: hiera_vault
    options:
      confine_to_keys:
        - '^vault_.*'
      ssl_verify: false
      address: http://vault:8200
      authentication:
        type: aws_iam
        config:
          role: vault_client_role
      default_field: value
      mounts:
        some_secret:
          - common

  - name: "Secret Data"
    lookup_key: "eyaml_lookup_key"
    path: "common.eyaml"
    options:
      pkcs7_private_key: /etc/puppetlabs/code/keys/private_key.pkcs7.pem
      pkcs7_public_key:  /etc/puppetlabs/code/keys/public_key.pkcs7.pem

  - name: "Global common data"
    path: "common.yaml"
